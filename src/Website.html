<!DOCTYPE HTML>
<html>
<head>
  <title>SPECS Wiper System</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" href="OfficialLogo.png">
  <style>
  html {
    font-family: Arial, Helvetica, sans-serif;
    text-align: center;
  }
  h1 {
    font-size: 2rem;
    color: rgb(255, 255, 255);
    line-height:2;
  }
  h2{
    font-size: 1.8rem;
    font-weight: bold;
    color: #000000;
  }
  h3{
    font-size: 2rem;
    font-weight: bold;
    color: #000000;
  }
  h4{
    font-size: 1.5rem;
    font-weight: bold;
    color: #000000;
  }
  .topnav {
    overflow: hidden;
    background-color: #000000;
  }
  .sys-header {
    overflow: hidden;
  }
  body {
    margin: 0;
    background-color: #d8d8d8;
  }
  .content {
    padding: 30px;
    margin: 10px;
    max-width: 600px;
    display:inline-block;
  }
  .content2 {
    padding: 30px;
    margin: 0 auto;
    max-width:1200px;
  }
  .card {
    background-color: #ffffff;;
    margin: 10px 10px 10px 10px;
    box-shadow: 2px 2px 12px 1px rgba(54, 54, 54, 0.5);
    padding-top:10px;
    padding-bottom:20px;
    width:600px;
    display:inline-block;
  }
  .card2 {
    background-color: #ffffff;;
    box-shadow: 2px 2px 12px 1px rgba(54, 54, 54, 0.5);
    padding-top:10px;
    padding-bottom:20px;
  }
  .card3 {
    background-color: #ffffff;;
    outline-style:hidden;
    box-shadow: 0 1px 0 #000000 inset, 0 -1px 0 #000000 inset;
    padding-top:10px;
    padding-bottom:20px;
  }
  .sensors {
    padding: 15px 50px;
    font-size: 24px;
    text-align: center;
    outline: none;
    color: #fff;
    background-color: #444444;
  }
  .button {
    padding: 15px 50px;
    font-size: 24px;
    text-align: center;
    outline: none;
    color: #fff;
    background-color: #0f8b8d;
    border: none;
    border-radius: 5px;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    -webkit-tap-highlight-color: rgba(0,0,0,0);
   }
   .okButton {
    padding: 12px 12px;
    font-size: 1.2rem;
    text-align: center;
    outline: none;
    color: #fff;
    background-color: #0f8b8d;
    border: none;
    border-radius: 5px;
   }
   .info {
    outline-style: hidden;
    border:none;
    background-color: #ffffff;
   }
   .button:active {
     background-color: #0f8b8d;
     box-shadow: 2 2px #CDCDCD;
     transform: translateY(2px);
   }
   .state {
     font-size: 1.5rem;
     color:#8c8c8c;
     font-weight: bold;
   }
  </style>
<title>ESP Web Server</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="icon" href="data:,">
</head>
<body>
  <div class="topnav">
    <img src="OfficialLogo.png" style="float:left;margin:15px 15px 15px 15px;" width="128" height="78">
    <h1 style="float:left;">SPECS Wiper System</h1>
  </div>
  <div class="content">
    <div class="card">
      <h2>Run A Cleaning</h2>
      <img src="loading.gif" alt="Loading" id="loading" style="width:0px;height:0px;visibility:hidden;">
      <p><button id="button" class="button" value="button"><span id="state">Go</button></p>
    </div>
      <div class="card">
        <h2>Auto-Clean with Rain</h2>
        <p>System will run when it is raining</p>
        <button id="rainToggle" class="info" value="rainToggle"><img id="rainToggleImg" src="toggleOff.png" width="100px" height="auto"></button>
        <p><span id="rainTog">Off</span></p>
    </div>
  </div>
  <div class="card">
    <h2>Cleaning Interval</h2>
    <form style="display:inline-block;">
      <select name = "Days" id = "Days">
      <option value = "Days" selected>Days</option>
      <option value = "0">0 Days</option>
      <option value = "1">1 Day</option>
      <option value = "2">2 Days</option>
      <option value = "3">3 Days</option>
      <option value = "4">4 Days</option>
      <option value = "5">5 Days</option>
      </select>
    </form>
    <form style="display:inline-block;">
      <select name = "Hours" id = "Hours">
      <option value = "Hours" selected>Hours</option>
      <option value = "0">0 Hours</option>
      <option value = "1">1 Hour</option>
      <option value = "2">2 Hours</option>
      <option value = "3">3 Hours</option>
      <option value = "4">4 Hours</option>
      <option value = "5">5 Hours</option>
      <option value = "6">6 Hours</option>
      <option value = "7">7 Hours</option>
      <option value = "8">8 Hours</option>
      <option value = "9">9 Hours</option>
      <option value = "10">10 Hours</option>
      <option value = "11">11 Hours</option>
      <option value = "12">12 Hours</option>
      <option value = "13">13 Hours</option>
      <option value = "14">14 Hours</option>
      <option value = "15">15 Hours</option>
      <option value = "16">16 Hours</option>
      <option value = "17">17 Hours</option>
      <option value = "18">18 Hours</option>
      <option value = "19">19 Hours</option>
      <option value = "20">20 Hours</option>
      <option value = "21">21 Hours</option>
      <option value = "22">22 Hours</option>
      <option value = "23">23 Hours</option>
      </select>
    </form>
    <form style="display:inline-block;">
      <select name = "Minutes" id = "Minutes">
      <option value = "Minutes" selected>Minutes</option>
      <option value = "0">0 Minutes</option>
      <option value = "5">5 Minutes</option>
      <option value = "10">10 Minutes</option>
      <option value = "15">15 Minutes</option>
      <option value = "20">20 Minutes</option>
      <option value = "25">25 Minutes</option>
      <option value = "30">30 Minutes</option>
      <option value = "35">35 Minutes</option>
      <option value = "40">40 Minutes</option>
      <option value = "40">45 Minutes</option>
      <option value = "50">50 Minutes</option>
      <option value = "55">55 Minutes</option>
      </select>
    </form>
    <button id="intervalSet" class="okButton" value="interval">Ok</button>
    <h4><u>Last Cleaning Occured:</u></h4>
    <h4><span id="lastCleaning">XX / XX / XXXX at XX : XX</span></h4>
    <h4><u>Next Cleaning Will Be:</u></h4>
    <h4><span id="nextCleaning">XX / XX / XXXX at XX : XX</span></h4>
  </div>
  <div class="content2">
    <div class="card2">
      <img src="refresh.png" width="50px" height="auto" style="float:left;padding:12px 12px 12px 12px;visibility:hidden;">
      <h3 style="display:inline-block;">System Data</h3>
      <button id="refresh" class="info" value="refresh" style="float:right;padding:12px 12px 12px 12px;"><img src="refresh.png" width="50px" height="50px"></button>
      <p> View information from sensors connected to the system.</p>
      <p> Last Updated: </p>
      <p><span id="refreshTime">XX/XX/XXXX at XX:XX</span></p>
      <div class="card3">
        <h2 style="display:inline-block">Power Stored</h2>
        <button id="powerStoredInfo" class="info" value="powerStored"><img src="info.png" width="20px" height="20px"></button>
        <p class="powerStored"><button id="sensors" class="sensors"><span id="powerStored">[Data]</span></button></p>
        <p id="powerStoredDesc" style="visibility:hidden;font-size:xx-small;">What is power stored</p>
      </div>
      <div class="card3">
        <h2 style="display:inline-block">Power Output</h2>
        <button id="powerOutputInfo" class="info" value="powerOutput"><img src="info.png" width="20px" height="20px"></button>
        <p class="powerOutput"><button id="sensors" class="sensors"><span id="powerOutput">[Data]</span></button></p>
        <p id="powerOutputDesc" style="visibility:hidden;font-size:xx-small;">What is power output</p>
      </div>
      <div class="card3">
        <h2 style="display:inline-block">Humidity</h2>
        <button id="humidInfo" class="info" value="humid"><img src="info.png" width="20px" height="20px"></button>
        <p class="humid"><button id="sensors" class="sensors"><span id="humid">[Data]</span></button></p>
        <p id="humidDesc" style="visibility:hidden;font-size:xx-small;">What is a humidity sensor</p>
      </div>
      <div class="card3">
        <h2 style="display:inline-block">Rain</h2>
        <button id="rainInfo" class="info" value="rain"><img src="info.png" width="20px" height="20px"></button>
        <p class="rain"><button id="sensors" class="sensors"><span id="rain">[Data]</span></button></p>
        <p id="rainDesc" style="visibility:hidden;font-size:xx-small;">What is a rain sensor</p>
      </div>
      <div class="card3">
        <h2 style="display:inline-block">Temperature</h2>
        <button id="tempInfo" class="info" value="temp"><img src="info.png" width="20px" height="20px"></button>
        <p class="temp"><button id="sensors" class="sensors"><span id="temp">[Data]</span></button></p>
        <p id="tempDesc" style="visibility:hidden;font-size:xx-small;">What is a temperature sensor</p>
      </div>
      <div class="card3">
        <h2 style="display:inline-block">Daylight</h2>
        <button id="daylightInfo" class="info" value="daylight"><img src="info.png" width="20px" height="20px"></button>
        <p class="daylight"><button id="sensors" class="sensors"><span id="daylight">[Data]</span></button></p>
        <p id="daylightDesc" style="visibility:hidden;font-size:xx-small;">What is a daylight sensor</p>
      </div>
    </div>
  </div>
<script>
  var state = "Go";
  var powerStoredState = false;
  var powerOutputState = false;
  var humidState = false;
  var rainState = false;
  var tempState = false;
  var daylightState = false;
  var rainToggleState = false;

  window.addEventListener('load', onLoad);
  function onLoad(event) {
    // Add some initializing sensor data values function


    initButton();
  }
  function initButton() {
    document.getElementById('button').addEventListener('click', toggle);
    document.getElementById('intervalSet').addEventListener('click', toggle);
    document.getElementById('refresh').addEventListener('click', toggle);
    document.getElementById('powerStoredInfo').addEventListener('click', toggle);
    document.getElementById('powerOutputInfo').addEventListener('click', toggle);
    document.getElementById('humidInfo').addEventListener('click', toggle);
    document.getElementById('rainInfo').addEventListener('click', toggle);
    document.getElementById('tempInfo').addEventListener('click', toggle);
    document.getElementById('daylightInfo').addEventListener('click', toggle);
    document.getElementById('rainToggle').addEventListener('click', toggle);
  }
  function toggle(){
    if (this.value == 'button') {
      if (state == "Go") {
        // Cleaning is now in progress, update firebase


        state = "Cleaning...";
        document.getElementById('state').innerHTML = state;

        this.style.background = '#8c8c8c';
        // Disables button so you can't press it again
        //this.disabled="disabled";

        // Loading Gif
        document.getElementById('loading').style.visibility = 'visible';
        document.getElementById('loading').style.width = '500px';
        document.getElementById('loading').style.height = '50px';
      }
      else {
        // Cleaning is over, retrieve update from firebase


        state = "Go";
        document.getElementById('state').innerHTML = state;

        this.style.background = '#0f8b8d';
        // Re enables button to press again
        this.enabled = "enabled";

        // Loading Gif
        document.getElementById('loading').style.visibility = 'hidden';
        document.getElementById('loading').style.width = '0px';
        document.getElementById('loading').style.height = '0px';
      }
    }
    else if (this.value == 'powerStored') {
      if (!powerStoredState) {
        powerStoredState = true;
          document.getElementById('powerStoredDesc').style.visibility = 'visible';
          document.getElementById('powerStoredDesc').style.fontSize = 'medium';
      }
      else {
        powerStoredState = false;
        document.getElementById('powerStoredDesc').style.visibility = 'hidden';
        document.getElementById('powerStoredDesc').style.fontSize = 'xx-small';
      }
    }
    else if (this.value == 'powerOutput') {
      if (!powerOutputState) {
        powerStoredState = true;
          document.getElementById('powerOutputDesc').style.visibility = 'visible';
          document.getElementById('powerOutputDesc').style.fontSize = 'medium';
      }
      else {
        powerOutputState = false;
        document.getElementById('powerOutputDesc').style.visibility = 'hidden';
        document.getElementById('powerOutputDesc').style.fontSize = 'xx-small';
      }
    }
    else if (this.value == 'humid') {
      if (!humidState) {
          humidState = true;
          document.getElementById('humidDesc').style.visibility = 'visible';
          document.getElementById('humidDesc').style.fontSize = 'medium';
      }
      else {
        humidState = false;
        document.getElementById('humidDesc').style.visibility = 'hidden';
        document.getElementById('humidDesc').style.fontSize = 'xx-small';
      }
    }
    else if (this.value == 'rain') {
      if (!rainState) {
          rainState = true;
          document.getElementById('rainDesc').style.visibility = 'visible';
          document.getElementById('rainDesc').style.fontSize = 'medium';
      }
      else {
        rainState = false;
        document.getElementById('rainDesc').style.visibility = 'hidden';
        document.getElementById('rainDesc').style.fontSize = 'xx-small';
      }
    }
    else if (this.value == 'temp') {
      if (!tempState) {
          tempState = true;
          document.getElementById('tempDesc').style.visibility = 'visible';
          document.getElementById('tempDesc').style.fontSize = 'medium';
      }
      else {
        tempState = false;
        document.getElementById('tempDesc').style.visibility = 'hidden';
        document.getElementById('tempDesc').style.fontSize = 'xx-small';
      }
    }
    else if (this.value == 'daylight') {
      if (!daylightState) {
          daylightState = true;
          document.getElementById('daylightDesc').style.visibility = 'visible';
          document.getElementById('daylightDesc').style.fontSize = 'medium';

      }
      else {
        daylightState = false;
        document.getElementById('daylightDesc').style.visibility = 'hidden';
        document.getElementById('daylightDesc').style.fontSize = 'xx-small';
      }
    }
    else if (this.value == 'interval') {
      // setting interval and checking for bad values
      // checking for 0 0 0
      var day = document.getElementById('Days').value;
      var hour = document.getElementById('Hours').value;
      var min = document.getElementById('Minutes').value;
      if ((day == "0" && hour == "0" && min == "0") || day == "Days" || hour == "Hours" || min == "Minutes") {
        alert("Please enter valid time interval");
      }
      else {
        // Add logic to calculate months days etc.
        document.getElementById('lastCleaning').innerHTML = "00 / 00 / 0000 at 00 : 00";
        document.getElementById('nextCleaning').innerHTML = "00 / 00 / 0000 at 00 : 00";
      }
    }
    else if (this.value == 'refresh') {
      // retrieve the respective data from firebase

      document.getElementById('daylight').innerHTML = "0";
      document.getElementById('temp').innerHTML = "0";
      document.getElementById('rain').innerHTML = "0";
      document.getElementById('humid').innerHTML = "0";
      document.getElementById('powerStored').innerHTML = "0";
      document.getElementById('powerOutput').innerHTML = "0";

      // update refresh time
      document.getElementById('refreshTime').innerHTML = "00/00/0000 at 00:00";
    }
    else if (this.value == 'rainToggle') {
      if (!rainToggleState) {
        // auto-clean toggle on, update in firebase


        rainToggleState = true;
        document.getElementById('rainToggleImg').src = 'toggleOn.png';
        document.getElementById('rainTog').innerHTML = 'On';
      }
      else {
        // auto-clean toggle off, update in firebase


        rainToggleState = false;
        document.getElementById('rainToggleImg').src = 'toggleOff.png';
        document.getElementById('rainTog').innerHTML = 'Off';
      }
    }
  }
</script>
</body>
</html>
